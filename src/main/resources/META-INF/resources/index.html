<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PICT</title>
    <link rel="stylesheet" href="css/98.css">
    <style>
        body {
            background-color: #008080;
        }

        .center {
            margin: auto;
            width: 50%;
        }

        textarea {
            resize: none;
        }
    </style>
</head>
<body>
<div class="window center">
    <div class="title-bar">
        <div class="title-bar-text">Microsoft PICT Input Form</div>
        <div class="title-bar-controls">
            <button aria-label="Minimize"></button>
            <button aria-label="Maximize"></button>
            <button aria-label="Close"></button>
        </div>
    </div>
    <div class="window-body">

        <section class="field-row-stacked">
            <div class="field-row-stacked">
                <label for="pict-input">Enter PICT params:</label>
                <textarea id="pict-input" rows="25" onclick="clearInitialText()"></textarea>
            </div>
            <section class="field-row" style="justify-content: flex-end">
                <input type="submit" class="center" onclick="processPict()">
            </section>
            <div class="field-row-stacked">
                <label for="pict-output">Test cases:</label>
                <textarea id="pict-output" rows="25" readonly onclick="selectAll()"></textarea>
            </div>
        </section>
        <div class="status-bar">
            <p class="status-bar-field">Pict Version: 3.7.4</p>
            <p class="status-bar-field">Slide 1</p>
            <p class="status-bar-field">CPU Usage: 14%</p>
        </div>
    </div>
</div>
<script>
    const inputField = document.getElementById('pict-input');
    const outputField = document.getElementById('pict-output');

    const initialText = 'Bla Bla Bla...'
    inputField.value = initialText;
    outputField.value = '';

    function clearInitialText() {
        if (inputField.value === initialText) {
            inputField.value = '';
        }
    }

    function processPict() {
        if (inputField.value === initialText || inputField.value === '') {
            return;
        }

        const xhttp = new XMLHttpRequest();
        xhttp.open('POST', 'pict', true);
        xhttp.setRequestHeader('Content-Type', 'text/plain');
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4) {
                outputField.value = this.status === 200
                    ? this.responseText
                    : "HTTP STATUS " + this.status + ": " + this.responseText;
            }
        };
        xhttp.send(inputField.value);
    }

    function selectAll() {
        outputField.select();
    }
</script>
</body>
</html>